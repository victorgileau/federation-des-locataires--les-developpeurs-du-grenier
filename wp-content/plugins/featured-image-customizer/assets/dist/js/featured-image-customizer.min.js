var FIC=FIC||{},$=jQuery||{};FIC.previewLoaderInstance,FIC.dismissNotice=function(e){e.preventDefault(),$elem=$(e.target),$elem.closest(".fic-notice-dimiss.is-dismissible").remove()},FIC.showNotice=function(e,t="notice-success"){$(".fic-notice-container").empty(),$(".fic-notice-container").append($("<div/>").addClass("notice fic-notice-dimiss is-dismissible "+t).html('<button type="button" class="notice-dismiss fic-notice-dismiss"><span class="screen-reader-text">Dismiss this notice.</span></button><p>'+e+"</p>"))},FIC.startPreviewLoader=function(e){var t;e.append($("<div/>").addClass("fic-preview-loader")),FIC.previewLoaderInstance=setInterval(function(){t=$(".fic-preview-loader").width()+10,t>=$(document).width()-t?$(".fic-preview-loader").css({width:"0px"}):$(".fic-preview-loader").css({width:t+"px"})},100)},FIC.stopPreviewLoader=function(e){clearInterval(FIC.previewLoaderInstance),e.find(".fic-preview-loader").remove()},FIC.previewLoader=function(e){e.append($("<div/>").addClass("fic-preview-loader")),FIC.startPreviewLoader()},FIC.toggleAdvancedOptions=function(e){e.preventDefault(),$elem=$(e.target),$elem.find("i.dashicons").toggleClass("dashicons-arrow-right").toggleClass("dashicons-arrow-down"),$(".fic-advanced-options").fadeToggle()},FIC.openModalWindow=function(e){e.preventDefault(),$elem=$(e.target),$(".fic-modal").fadeIn(200).toggleClass("d-flex")},FIC.closeModalWindow=function(e){e.preventDefault(),$elem=$(e.target),$(".fic-modal").fadeOut(200).toggleClass("d-flex")},function(e,t){e(document).on("click",".fic-notice-dismiss",FIC.dismissNotice),e(document).on("click",".fic-advanced-options-toggle",FIC.toggleAdvancedOptions),e(document).on("click",".fic-open-modal-window",FIC.openModalWindow),e(document).on("click",".fic-close-modal-window",FIC.closeModalWindow)}(jQuery),FIC.ajaxBeforeSend=function(e){e.prop("disabled",!0),FIC.startPreviewLoader($(".fic-preview"))},FIC.ajaxSuccess=function(e,t,i){FIC.stopPreviewLoader($(".fic-preview")),FIC.showNotice(i[1],i[0]),e.prop("disabled",!1)},FIC.ajaxError=function(e,t){FIC.stopPreviewLoader($(".fic-preview")),FIC.showNotice(t)},window._wpLoadBlockEditor&&window._wpLoadBlockEditor.then(function(){function e(e){return function(i){return t(wp.element.Fragment,{},wp.element.createElement("div",{dangerouslySetInnerHTML:{__html:'<div class="fic"><p>Use the button below to create and store a new featured image on the fly from 100+ brand logos.</p><p><a href="#" class="button button-primary fic-open-modal-window" title="Open Featured Image Customizer..."><i class="dashicons dashicons-cover-image"></i>New Featured Image</a></p></div>'}}),t(e,i))}}const t=wp.element.createElement;wp.hooks.addFilter("editor.PostFeaturedImage","featured-image-customizer/extend-featured-image-control",e)}),FIC.previewFeaturedImage=function(e){e.preventDefault();var t=$(e.target),i=$(e.target).closest("form");$.ajax({method:"post",url:fic.ajax_url,data:{action:"preview_featured_image",logo_a:i.find("input[name=logo_a]").val(),logo_b:i.find("input[name=logo_b]").val(),conjunction:i.find("input[name=conjunction]").val(),bgcolor:i.find("input[name=bgcolor]").val(),img_filename:i.find("input[name=filename]").val()},beforeSend:function(){FIC.ajaxBeforeSend(t)},success:function(e,n,o){e=JSON.parse(e);FIC.ajaxSuccess(t,i,e),void 0!==e[2]&&void 0!==e[3]&&void 0!==e[4]&&(i.prepend($("<input/>").attr({name:"fic-tmp-filepath",value:e[2],type:"hidden"})),i.prepend($("<input/>").attr({name:"fic-tmp-filename",value:e[3],type:"hidden"})),i.find("#fic-preview").empty().append($("<img/>").attr("src",e[4]).css("width","100%"))),i.find('input[name="logo_a"]').val(""),i.find('input[name="logo_b"]').val(""),i.find('input[name="conjunction"]').val(""),i.find('button[name="create-featured-image"]').attr("disabled",!1)},error:function(e,i,n){FIC.ajaxError(t,"Server timeout! You need to contact your system admin to incrase your PHP running time.")}})},function(e,t){e(document).on("click",'button[name="preview-featured-image"]',FIC.previewFeaturedImage)}(jQuery),FIC.createFeaturedImage=function(e){e.preventDefault();var t=$(e.target);$(e.target).closest("form");$.ajax({method:"post",url:fic.ajax_url,data:{action:"create_featured_image",post_id:$('input[name="post_id"]').val(),tmp_filepath:$('input[name="fic-tmp-filepath"]').val(),img_filename:$('input[name="fic-tmp-filename"]').val()},beforeSend:function(){FIC.ajaxBeforeSend(t)},success:function(e,t,i){$(".fic-close-modal-window").trigger("click"),location.reload()},error:function(e,i,n){FIC.ajaxError(t,"Server timeout! You need to contact your system admin to incrase your PHP running time.")}})},function(e,t){e(document).on("click",'button[name="create-featured-image"]',FIC.createFeaturedImage)}(jQuery);